"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var apollo_server_module_graphiql_1 = require("apollo-server-module-graphiql");
var url = require("url");
/* This middleware returns the html for the GraphiQL interactive query UI
 *
 * GraphiQLData arguments
 *
 * - endpointURL: the relative or absolute URL for the endpoint which GraphiQL will make queries to
 * - (optional) query: the GraphQL query to pre-fill in the GraphiQL UI
 * - (optional) variables: a JS object of variables to pre-fill in the GraphiQL UI
 * - (optional) operationName: the operationName to pre-fill in the GraphiQL UI
 * - (optional) result: the result of the query to pre-fill in the GraphiQL UI
 */
exports.default = (function (options) {
    var graphiqlHandler = function (req, res, next) {
        var query = req.url && url.parse(req.url, true).query;
        apollo_server_module_graphiql_1.resolveGraphiQLString(query, options, req).then(function (graphiqlString) {
            res.setHeader('Content-Type', 'text/html');
            res.write(graphiqlString);
            res.end();
        }, function (error) { return next(error); });
    };
    return graphiqlHandler;
});
//# sourceMappingURL=index.js.map